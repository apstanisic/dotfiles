- name: Dconf
  tags:
    - dconf
  block:
    - name: Installed deps
      become: true
      apt:
        name: python3-apt
    - name: Gather info about installed packages
      ansible.builtin.package_facts:
        manager: auto
    - name: Restore dconf config if in Gnome gystem
      shell: dconf load / < "$HOME/dotfiles/machine-setup/manual-dconf-backup.dconf"
      # Only run in gnome system
      when: "'dconf-cli' in ansible_facts.packages"
